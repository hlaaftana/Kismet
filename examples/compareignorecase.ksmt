defn [compare_ignore_case? [x [slice]]] {
  |> x ~ [collect lower] [consecutives 2] [every? [fn* [a b] [is? a b]]
}

assert [compare_ignore_case? 'abcD' 'AbCD' 'ABCd' 'ABCD' 'abcd']
assert_not [compare_ignore_case? ' ab CD' 'abcd']
assert_not [compare_ignore_case? 'bcda' 'cbad' 'dabdab']