defn binary_search(a: List, k: Int32) {
  c: b: size a
  i: 0i32
  while [< i b] {
    mid: half [+ i b]
    or?(< [downcast Int32 a[mid]] k, i: next mid, b: mid)
  }
  echo [string "i: " i ", c: " c ", a[i]: " a[i] ", k: " k]
  unless [and [< i c] [is? [downcast Int32 a[i]] k]] i: 1n
  i
}

assert_is [binary_search [1, 2, 3, 4, 5, 6] 4] 3
assert_is [binary_search [3, 5, 1, 4, 1] 1] 1n